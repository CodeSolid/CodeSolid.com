

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python Package Example: Setuptools &mdash; CodeSolid.com 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=19645805"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Installing a Python and Git Development Environment on Windows" href="../installing-a-python-development-environment-on-windows/" />
    <link rel="prev" title="How To Profile Python Code" href="../how-do-i-profile-python-code/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            CodeSolid.com
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Featured Articles:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../using-latex-in-python/">Using LaTeX In Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing-pyenv-on-a-mac/">Installing Pyenv on a Mac (A Setup Guide With Usage Tips)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conda-vs-pip/">Conda vs. Pip, Venv, and Pyenv – Simplicity Wins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter-password/">Jupyter Password: Easy Notebook and Lab Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Added Recently:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sage/calc3/">Multivariable Calculus Sage Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex-inner-products/">The Inner Product of Complex Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started-with-ollama/">Getting Started With Ollama</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/yet-another-jdesmos-demo/">Yet Another JDesmos Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/desmos-jupyter/">Using Desmos Graphs in Jupyter Notebooks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Categories</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../category-math-and-math-software/">Math and Math Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../category-python-for-beginners-posts/">Python for Beginners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../category-python-functions/">Python Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../category-python-math-and-science/">Python Math and Science</a></li>
<li class="toctree-l1"><a class="reference internal" href="../category-python-practice/">Python Practice</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../category-python-tools/">Python Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../debugging-python-in-vs-code/">Debugging Python in VS Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing-pyenv-on-a-mac/">Installing Pyenv on a Mac (A Setup Guide With Usage Tips)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing-a-python-and-git-development-environment-on-windows-part-2/">Installing a Python and Git Development Environment on Windows, Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pip-vs-conda-two-top-tools-for-managing-python-packages/">Pip vs. Conda: Two Top Tools for Managing Python Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-to-install-pip-and-conda-on-the-same-machine/">How To Install Pip and Conda on the Same Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-do-i-profile-python-code/">How To Profile Python Code</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Python Package Example: Setuptools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-virtual-environment">Creating a Virtual Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyproject-toml">Pyproject.toml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-package">Creating the Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-some-tests">Adding Some Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixing-package-names">Fixing Package Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setuptools-configuration">Setuptools Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-the-project">Building The Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-our-setuptools-package-with-pip">Installing Our Setuptools Package With Pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-an-account-on-pypi-org">Creating an Account on Pypi.org</a></li>
<li class="toctree-l3"><a class="reference internal" href="#publishing-a-package-to-pypi-org">Publishing a Package to Pypi.org</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modifying-the-setuptools-configuration">Modifying the Setuptools Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-resources">Additional Resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../thonny-the-most-beginner-friendly-python-ide/">Thonny: The Most Beginner Friendly Python IDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conda-vs-pip/">Conda vs. Pip, Venv, and Pyenv – Simplicity Wins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installing-a-python-development-environment-on-windows/">Installing a Python and Git Development Environment on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simplicity-is-your-friend-python-vs-vs-code-for-teaching-software/">Simplicity is your Friend:  PyCharm vs. VS Code for Teaching Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pypy-first-look-a-faster-version-of-python/">Is PyPy a Faster Version of Python?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../is-python-free-with-list-of-tools/">Is Python Free?  Yes!  We List the Best Free Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python-configuration/">Python Configuration: Top Built-In and Third-Party Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pip-vs-pipenv-which-is-better-and-which-to-learn-first/">Pip vs Pipenv: Which is better and which to learn first?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pycharm-vs-vs-code/">PyCharm vs. VS Code: Which Is Better and Why?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../category-pandas/">Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../category-miscellaneous/">Other</a></li>
<li class="toctree-l1"><a class="reference internal" href="../category-docker/">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../category-jupyter/">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../category-learn-to-code/">Learn to Code</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">CodeSolid.com</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../category-python-tools/">Python Tools</a></li>
      <li class="breadcrumb-item active">Python Package Example: Setuptools</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/python-package-example-setuptools.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="python-package-example-setuptools">
<h1>Python Package Example: Setuptools<a class="headerlink" href="#python-package-example-setuptools" title="Link to this heading"></a></h1>
<p>Have you ever wondered about how to create a package like the ones you can install into your python environment using tools like <a class="reference external" href="https://codesolid.com/pip-vs-pipenv-which-is-better-and-which-to-learn-first/">pip or pipenv</a>?</p>
<p>This article starts with the complete source code plus a how-to guide to publishing a minimal Python package to PyPi. The source is also available on <a class="reference external" href="https://github.com/CodeSolid/python-package-example-setuptools">GitHub</a>. Once we have “Hello Setuptools” working, we create a new branch where we show how to add more features to a setuptools package.</p>
<section id="creating-a-virtual-environment">
<h2>Creating a Virtual Environment<a class="headerlink" href="#creating-a-virtual-environment" title="Link to this heading"></a></h2>
<p>As we normally do when we start a new Python project, we create and activate a virtual environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># On windows replace the second line with:</span>
<span class="c1"># .venv\Scripts\activate.bat</span>

python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate
</pre></div>
</div>
</section>
<section id="pyproject-toml">
<h2>Pyproject.toml<a class="headerlink" href="#pyproject-toml" title="Link to this heading"></a></h2>
<p>At the root of our repository, we create a pyproject.toml file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[build-system]</span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;setuptools&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;wheel&quot;</span><span class="p">]</span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;setuptools.build_meta&quot;</span>
</pre></div>
</div>
<p>This is all this file needs to contain to get started, and basically tells the Python build system that we want to use setuptools as our build tool, and we also want to use setuptools as our build system. It also enables the use of wheel, which speeds up our build and the build of any dependencies we require. Our next steps will be to create a package to install and create a configuration file to give setuptools information about how to build our project.</p>
<p>Before moving on, let’s share a quick note about pyproject.toml. If you’re curious about the background of this, it’s actually a Python standard, defined in PEP 518. The idea of the that PEP and pyproject.toml file was to have a standard place for the Python build and packaging system to look to configure setuptools (which was already widely used), and many other Python package tools that were starting to come on the scene.</p>
<p>OK, that’s enough of the history channel – let’s create a package.</p>
</section>
<section id="creating-the-package">
<h2>Creating the Package<a class="headerlink" href="#creating-the-package" title="Link to this heading"></a></h2>
<p>Next, let’s create the package we’re going to install. We’ll call our package hellosetup. I realize that “hello_setuptools” would be a bit more clear, but since PEP 8 says that package names should be short and should avoid underscores, we’ll follow that advice. We begin by giving the package and the tests for the package a place to live.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create directories</span>
mkdir<span class="w"> </span>src
mkdir<span class="w"> </span>src/hellosetup
mkdir<span class="w"> </span><span class="nb">test</span>
</pre></div>
</div>
<p>OK, good, those names are pretty clear, but at this point hellosetup is not a package – it’s just a folder. Let’s fix that by creating an empty __init__.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">&gt;</span> <span class="n">src</span><span class="o">/</span><span class="n">hellosetup</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Let’s give our package something to do by creating a module in our package:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/hellosetup/module1.py</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_article_url</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;returns the article describing how to publish this package&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;https://codesolid.com/python-package-example-setuptools&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">greet</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Say hi to setuptools so as not to appear rude&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, setuptools!&quot;</span>
</pre></div>
</div>
</section>
<section id="adding-some-tests">
<h2>Adding Some Tests<a class="headerlink" href="#adding-some-tests" title="Link to this heading"></a></h2>
<p>Even though our project has very humble beginnings, we want to add some tests. That’s because here at “Hello Setuptools Industries”, quality is Job #1.</p>
<p>Making sure we’re in the shell with our virtual environment activated, we can simply type <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pytest</span></code>. We create a file in our editor and start typing…</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># test/test_hellosetup.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">hellosetup.module1</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_article_url</span><span class="p">,</span> <span class="n">greet</span>
</pre></div>
</div>
<p>But wait a minute, this is ugly. We created a Python module with the name module1, which is maybe OK for a tutorial, but we don’t want the cool kids to know we have dumb module names. How can we fix this?</p>
</section>
<section id="fixing-package-names">
<h2>Fixing Package Names<a class="headerlink" href="#fixing-package-names" title="Link to this heading"></a></h2>
<p>Until our modules have sensible names, we can work around this a bit for now. Let’s open up our __init__.py file and add some imports to it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># src/hellosetup/__init__.py</span>

<span class="sd">&quot;&quot;&quot;Import some key functions for now&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.module1</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_article_url</span><span class="p">,</span> <span class="n">greet</span>
</pre></div>
</div>
<p>Now back in our test file, we see that we can change our import statement to read:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">hellosetup</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_article_url</span><span class="p">,</span> <span class="n">greet</span>
</pre></div>
</div>
<p>There, that’s much better.</p>
<p>Now we can finish our test file and run our tests.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># test/test_hellosetup.py</span>

<span class="c1"># Allow pytest to find the package root</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">hellosetup</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_article_url</span><span class="p">,</span> <span class="n">greet</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_greet</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">greet</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Hello, setuptools!&quot;</span>
    
<span class="k">def</span><span class="w"> </span><span class="nf">test_get_article_url</span><span class="p">():</span>
    <span class="k">assert</span> <span class="s2">&quot;codesolid.com&quot;</span> <span class="ow">in</span> <span class="n">get_article_url</span><span class="p">()</span>
</pre></div>
</div>
<p>To run the tests, at the root of the project, simply type “<code class="docutils literal notranslate"><span class="pre">pytest</span></code>”:</p>
<p><img alt="" src="../_images/pytest-output-1024x117.png" /></p>
</section>
<section id="setuptools-configuration">
<h2>Setuptools Configuration<a class="headerlink" href="#setuptools-configuration" title="Link to this heading"></a></h2>
<p>In many established packages, you may find a file named “setup.py”. This is a file that used to be required for using setuptools, but more recently <a class="reference external" href="https://setuptools.pypa.io/en/latest/userguide/quickstart.html#transitioning-from-setup-py-to-setup-cfg">its use has been discouraged</a> in favor of storing configuration in “setup.cfg”. With this in mind, let’s create a basic setup.cfg file in the root of our project to configure setuptools to be able to install our package.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[metadata]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">hellosetup</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">.</span><span class="n">1</span>

<span class="k">[options]</span>
<span class="n">package_dir</span><span class="o">=</span>
<span class="w">    </span><span class="err">=src</span>
<span class="n">packages</span><span class="o">=</span><span class="err">find:</span>

<span class="k">[options.packages.find]</span>
<span class="n">where</span><span class="o">=</span><span class="err">src</span>
<span class="n">install_requires</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="err">importlib; python</span><span class="mi">_</span><span class="n">version</span><span class="w"> </span><span class="err">&gt;</span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;3.0&quot;</span>
</pre></div>
</div>
<p><strong>IMPORTANT:</strong> You’ll want to give your project a new name that’s different from what I’ve used here to avoid conflicts, and you should adjust your other project files as well to make them consistent.</p>
</section>
<section id="building-the-project">
<h2>Building The Project<a class="headerlink" href="#building-the-project" title="Link to this heading"></a></h2>
<p>At this point, our project could actually be installed locally with Pip, as we outline in the next section. However, before doing that, we should make sure we’re ready not just to install locally, but that we’ve built our project to install correctly and quickly from pypi.org. To do this, with our virtual environment active, let’s install two new packages we’ll need.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>build
pip<span class="w"> </span>install<span class="w"> </span>twine
</pre></div>
</div>
<p>Next, we’ll run the build package as a module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>build
</pre></div>
</div>
<p>This will build two files into the local “dist” directory. The first, the “.whl” file, is a binary distribution, which pip will try to install first if it can. Pip checks this first as an optimization to speed up the installation. The second file, the “tar.gz” file, is a source code distribution that pip will use if the binary distribution cannot be used.</p>
</section>
<section id="installing-our-setuptools-package-with-pip">
<h2>Installing Our Setuptools Package With Pip<a class="headerlink" href="#installing-our-setuptools-package-with-pip" title="Link to this heading"></a></h2>
<p>Our package has not yet been published to pypi.org at this point, so we can’t just use “pip install hellosetup” as we normally would. But fear not, we can still test it out locally, and we’ll do that now.</p>
<p>To do this, in the terminal, start at the root of your project. From there, the first thing we want to do if our virtual environment is active is type “<code class="docutils literal notranslate"><span class="pre">deactivate</span></code>” to deactivate it – alternatively, you could open a new terminal to avoid this step.</p>
<p>Next, let’s move to the parent of our project and create a new directory and a new virtual environment, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>..
mkdir<span class="w"> </span>hellosetuptools_test
<span class="nb">cd</span><span class="w"> </span>hellosetuptools_test
python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate
</pre></div>
</div>
<p>Now, let’s install our package and test it out. All we need to do for that is tell pip to install from the directory of our project, not from pypi.org. In my case, that project directory is at <code class="docutils literal notranslate"><span class="pre">../python-package-example-setuptools</span></code>, so the command I want to use is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>--use-feature<span class="o">=</span><span class="k">in</span>-tree-build<span class="w"> </span>../python-package-example-setuptools/
</pre></div>
</div>
<p>Since I saw it seemed to install the package just fine, I could go look around in the .venv/lib/python<version>/site-packages directory to see my package there. But that’s no fun, let’s test it out in Python instead. At this point, we can open up an interactive Python shell and run a quick test. Here’s how it looks:</p>
<p><img alt="" src="../_images/hello-setuptools-test-1024x204.png" /></p>
<p>We just used Pip to install our package. Pretty cool, right? Well, yes, of course it is (it was a rhetorical question, as we all know). But now let’s do something even cooler, and publish our package to pypi.org, so we can show it off to our friends and future mates. Don’t delete this test directory for now, though, as we’ll be using it again.</p>
</section>
<section id="creating-an-account-on-pypi-org">
<h2>Creating an Account on Pypi.org<a class="headerlink" href="#creating-an-account-on-pypi-org" title="Link to this heading"></a></h2>
<p>If you don’t already have a pypi.org account, creating one is very simple, and will cause you no trouble if you’ve ever created an online account anywhere. You <a class="reference external" href="https://pypi.org/account/register/">register here</a>. You’ll need to supply your name, email address, and a password – and make sure you store your password somewhere secure, of course. All done? Awesome, let’s go publish our package.</p>
</section>
<section id="publishing-a-package-to-pypi-org">
<h2>Publishing a Package to Pypi.org<a class="headerlink" href="#publishing-a-package-to-pypi-org" title="Link to this heading"></a></h2>
<p>In the terminal, let’s deactivate our test directory’s virtual environment by typing “<code class="docutils literal notranslate"><span class="pre">deactivate</span></code>” in the terminal. We’re going to use a tool called <a class="reference external" href="https://twine.readthedocs.io/en/stable/">twine</a> to do this. Note that there’s a test.pypi.org website to which you can publish first to test things out, but this involves creating a separate account. Since we’ve already built and tested locally, we can save some time at least for this tutorial by publishing to the actual index.</p>
<p>We start by installing Twine and checking it in the usual way:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>.venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>twine
twine<span class="w"> </span>--version
</pre></div>
</div>
<p>Now we run the command to upload our package to pypi.org:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>twine<span class="w"> </span>upload<span class="w"> </span>dist/*
</pre></div>
</div>
<p>This will prompt you for the username and password that you entered when you created your pypi.org account in the last section. When the upload is done, it’ll show you a link you can use to view your new package.</p>
<p>Here’s <a class="reference external" href="https://pypi.org/project/hellosetup/0.0.1/">hellosetup version 0.0.1</a> looked for me:</p>
<p><img alt="hello, setuptools version 0.0.1" src="../_images/hellosetup.0.0.1-1024x692.png" /></p>
</section>
<section id="modifying-the-setuptools-configuration">
<h2>Modifying the Setuptools Configuration<a class="headerlink" href="#modifying-the-setuptools-configuration" title="Link to this heading"></a></h2>
<p>If you’ve followed along this far, congratulations! You’ve mastered the basics of creating a package, configuring setuptools and the Python build system using pyproject.toml and setup.cfg, building the package, and publishing it to pypi.org. So I wouldn’t blame you if you went to the fridge at this point and grabbed a beverage.</p>
<p>As for me, I’d like to make some improvements to our existing package. The package is there, and anytime you want, you can install it as you normally would with “<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">hellosetup</span></code>”. But it’s far too minimal for a real project, so let’s do a few things to whip it into a nicer shape. Putting my project manager hat on for a minute, I hand myself the following requirements:</p>
<ol class="arabic simple">
<li><p>Our project should have a description that tells people what this is all about. Seeing text that reads, “The author of this project has not provided a description” is likely to make my users feel that I don’t love them, and of course I do.</p></li>
<li><p>The project should have a link to the repository on GitHub.</p></li>
<li><p>While I’m busy linking to things, it would be slick to also include a link to this article. It’s no secret to you, of course, but the whole point of the project was to have an example for the article.</p></li>
<li><p>We’ll need to bump the version number up from 0.0.1 to 0.0.2 because we’re publishing a new version.</p></li>
</ol>
<p>The first step, before I bump up the version, is to tag the one I already have:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>tag<span class="w"> </span><span class="m">0</span>.0.1
git<span class="w"> </span>push<span class="w"> </span>--tag
</pre></div>
</div>
<p>Next, we’ll edit our configuration. Because pyproject.toml simply points to the backend builder, setuptools, we won’t need to touch pyproject.toml. Here’s how the edited file should look:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[metadata]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">hellosetup</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">.</span><span class="n">2</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">A package created with a setuptools tutorial.  See article link for more details.</span>
<span class="n">long_description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">file: README.rst</span>
<span class="n">long_description_content_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">text/x-rst</span>
<span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">BSD </span><span class="mi">3</span><span class="n">-Clause</span><span class="w"> </span><span class="n">License</span>
<span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">https://codesolid.com/python-package-example-setuptools</span>
<span class="n">project_urls</span><span class="o">=</span>
<span class="w">    </span><span class="err">Source=https://github.com/CodeSolid/python-package-example-setuptools</span>

<span class="k">[options]</span>
<span class="n">package_dir</span><span class="o">=</span>
<span class="w">    </span><span class="err">=src</span>
<span class="n">packages</span><span class="o">=</span><span class="err">find:</span>

<span class="k">[options.packages.find]</span>
<span class="n">where</span><span class="o">=</span><span class="err">src</span>
<span class="n">install_requires</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="err">importlib; python</span><span class="mi">_</span><span class="n">version</span><span class="w"> </span><span class="err">&gt;</span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;3.0&quot;</span>
</pre></div>
</div>
<p>As you can see, we’ve changed the version, added values for “url” (a single value) and project_urls (a dictionary). We’ve also added a description. For long_description, we had to create a new file, README.rst. As an aside, trying to give it a different name didn’t work, but we could have pointed to the original REAME.md by setting <code class="docutils literal notranslate"><span class="pre">long_description_content_type</span> <span class="pre">=</span> <span class="pre">text/markdown</span></code>. That file is <a class="reference external" href="https://github.com/CodeSolid/python-package-example-setuptools/blob/main/README.rst">here</a>, if you’re curious.</p>
<p>The resulting <a class="reference external" href="https://pypi.org/project/hellosetup/0.0.2/">hellosetup version 0.0.2</a> is looking a lot better:</p>
<p><img alt="" src="../_images/hellosetup.0.0.2-1024x921.png" /></p>
</section>
<section id="additional-resources">
<h2>Additional Resources<a class="headerlink" href="#additional-resources" title="Link to this heading"></a></h2>
<p>This article was created from several online resources that are worth consulting if you’re building a package that goes beyond trying out an online tutorial, or simply want to learn more.</p>
<p>The Guides and Tutorials on the <a class="reference external" href="https://packaging.python.org/en/latest/">Python Packaging User Guide</a> site has a ton of great information that goes into significantly more depth than this article.</p>
<p>Of course, the <a class="reference external" href="https://setuptools.pypa.io/en/latest/">setuptools documentation</a> is also very much worth reviewing, especially the <a class="reference external" href="https://setuptools.pypa.io/en/latest/userguide/quickstart.html">quickstart</a> and the section on <a class="reference external" href="https://setuptools.pypa.io/en/latest/userguide/declarative_config.html">configuring setup() using setup.cfg</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../how-do-i-profile-python-code/" class="btn btn-neutral float-left" title="How To Profile Python Code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../installing-a-python-development-environment-on-windows/" class="btn btn-neutral float-right" title="Installing a Python and Git Development Environment on Windows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, John Lockwood.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QX7KGT4YPE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QX7KGT4YPE', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>