<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Syntax Errors in Python &mdash; CodeSolid.com 0.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=19645805"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../" class="icon icon-home">
            CodeSolid.com
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Featured Articles:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../using-latex-in-python/">Using LaTeX In Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installing-pyenv-on-a-mac/">Installing Pyenv on a Mac (A Setup Guide With Usage Tips)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conda-vs-pip/">Conda vs. Pip, Venv, and Pyenv – Simplicity Wins</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Jupyter:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../beautiful-documentation-with-jupyterbook/">My Journey to Beautiful Documentation With JupyterBook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jupyter-lite-python-in-the-browser-with-serverless-jupyter/">Jupyter Lite:  Python in the Browser with Serverless Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jupyter-notebook-a-complete-introduction/">Jupyter Notebook: A Complete Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jupyter-password/">Jupyter Password: Easy Notebook and Lab Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../run-python-online-with-jupyterlite/">Run Python Online: Watch the Video to Learn How</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../all_files/">Site Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">CodeSolid.com</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Syntax Errors in Python</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/images/python-errors/index.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>Table of Contents</p>
<ul class="simple">
<li><p>Syntax Errors in Python</p>
<ul>
<li><p>Indentation Errors</p></li>
</ul>
</li>
<li><p>Exceptions, Errors, and Bugs</p>
<ul>
<li><p>Exceptions and Errors</p></li>
<li><p>It’s Not a Feature; It’s a Bug</p></li>
</ul>
</li>
<li><p>Try Block Basics: Handling Exceptions in Python</p>
<ul>
<li><p>Handling Built-In Exceptions</p></li>
<li><p>Handling Base Class Exception Types</p></li>
<li><p>Handling Multiple Exception Types</p></li>
<li><p>Handling Base Class Exceptions: A Caveat</p></li>
</ul>
</li>
<li><p>Raising Built-In and User-Defined Exceptions</p></li>
<li><p>Python Error Handling: Do’s and Don’ts</p></li>
</ul>
<p>“To err is human,” and no one knows that better than software developers. In Python, as in other programming languages, learning to correctly and quickly fix the errors that we make – and to handle the errors our program can make – is an essential part of learning to program correctly. The difference between a program that handles errors well and one that does not is the difference between one that will delight your users or discourage them. For us developers, it means the difference between a system software that is easy to maintain and one that is opaque even to us.</p>
<p>This article will cover several aspects of successful error handling in Python, from the simple syntax errors that beginners make to discussing runtime exceptions and how to help our users be successful – whether we’re writing simple scripts for our use or serious production code for others.</p>
<p>The topics we’ll cover include the following:</p>
<ul class="simple">
<li><p>Types of errors in Python</p></li>
<li><p>Python syntax errors vs. runtime exceptions</p></li>
<li><p>Handling exceptions</p></li>
<li><p>The difference between bugs, exceptions, and errors</p></li>
<li><p>Error handling mindset and best practices</p></li>
</ul>
<section id="syntax-errors-in-python">
<h1>Syntax Errors in Python<a class="headerlink" href="#syntax-errors-in-python" title="Link to this heading">¶</a></h1>
<p>Syntax errors are errors that won’t even let us run our program. In other languages, these are sometimes called “compiler errors,” meaning that the parser doesn’t recognize whatever you typed as valid. Syntax errors are especially common for beginner programmers and even senior engineers who are either learning a new programming language for the first time or “context switching” between languages.</p>
<p>When the Python interpreter encounters a syntax error will try to point you to where the error appeared. Here’s a screenshot showing one such error:</p>
<p><img alt="" src="../../_images/image-291.png" /></p>
<p>If you’re a beginner, the critical skill to master here is to note that the error message often tells you exactly where and what you need to fix. In this case, changing the first line to <code class="docutils literal notranslate"><span class="pre">&quot;def</span> <span class="pre">greeting()</span></code>:” fixes the error, just as the error message advises.</p>
<section id="indentation-errors">
<h2>Indentation Errors<a class="headerlink" href="#indentation-errors" title="Link to this heading">¶</a></h2>
<p>Another error newcomers often make (especially if they switch editors a lot) is an indentation error, which is another flavor of syntax error raised when indentation is incorrect.</p>
<p>This error is somewhat unique to Python since Python uses indentation to identify “block structure” – lines that belong together. Other languages use keywords or curly braces to do the same thing.</p>
<p>Here’s an example of incorrect indentation that’s relatively easy to fix:</p>
<p><img alt="" src="../../_images/image-311.png" /></p>
<p>When correctly formatted, the lines after the if and after the else should have an additional level of indent, as shown here:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello &quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">)</span>
        
<span class="n">greeting</span><span class="p">()</span>

<span class="c1"># Outputs:  Hello, world!</span>
</pre></div>
</div>
<p>Indentation errors can be harder to fix when they involve mixed tabs and spaces since sometimes it won’t be immediately obvious where the problem lies. It’s best to pick an editor with good Python support, such as VSCode (with the Python extension) or PyCharm. These editors will automatically follow PEP8 guidance of four spaces per indent level. They also include tools to reformat a Python file if it’s already indented incorrectly.</p>
</section>
</section>
<section id="exceptions-errors-and-bugs">
<h1>Exceptions, Errors, and Bugs<a class="headerlink" href="#exceptions-errors-and-bugs" title="Link to this heading">¶</a></h1>
<section id="exceptions-and-errors">
<h2>Exceptions and Errors<a class="headerlink" href="#exceptions-and-errors" title="Link to this heading">¶</a></h2>
<p>In Java, there’s a strict distinction between the two classes, Error and Exception. An exception, also called a checked exception, must be handled in your program or it won’t compile. An error, on the other hand, does not need to be caught. The rationale behind leaving errors unchecked is the idea that your program can’t recover from them.</p>
<p>In Python, exceptions are always unchecked. This means that it’s up to you whether you want to handle it or not. So the line between an exception and an error is much less clear-cut. Syntax errors are always called errors, but exceptions can be named either way. For example, “OSError” is a runtime exception.</p>
<p>So errors and exceptions are pretty much synonyms in Python, and non-syntax errors have the following characteristics:</p>
<ul class="simple">
<li><p>They happen while our program is running.</p></li>
<li><p>We can handle them or not. Generally, for anything going to production or another user, they should be handled and either presented as a more friendly error message or logged.</p></li>
</ul>
</section>
<section id="it-s-not-a-feature-it-s-a-bug">
<h2>It’s Not a Feature; It’s a Bug<a class="headerlink" href="#it-s-not-a-feature-it-s-a-bug" title="Link to this heading">¶</a></h2>
<p>Let’s take the case of selecting a user by email from a database table. We can probably all agree that if that wrong table name is wrong in our code, it’s definitely a bug. It’s also a bug if the user email is not in the table and we just let the low-level exception message bubble up to the user as a nasty “500 error” (for example), instead of formatting it nicely and allowing the user to fix it.</p>
<p>In either case, bugs result from either code that’s so bad it doesn’t work at all or code that’s just good enough to hobble along but doesn’t provide a good user experience.</p>
<p>Bugs fall into many categories, so it’s impossible to cover them comprehensively, but certainly, many of them result from poor or inadequate error handling. Because this is so important, we want to discuss some best practices for handling or preventing errors.</p>
<p>However, before discussing best practices, we should first ensure that we have a solid grasp of the basic mechanics of exception handling in Python. This is the topic of the next section.</p>
</section>
</section>
<section id="try-block-basics-handling-exceptions-in-python">
<h1>Try Block Basics: Handling Exceptions in Python<a class="headerlink" href="#try-block-basics-handling-exceptions-in-python" title="Link to this heading">¶</a></h1>
<section id="handling-built-in-exceptions">
<h2>Handling Built-In Exceptions<a class="headerlink" href="#handling-built-in-exceptions" title="Link to this heading">¶</a></h2>
<p>Python supports many different built-in exceptions that can happen at runtime. We might try to add two types, like a string and a number, which results in a TypeError. We might open a file for reading that isn’t there and get a FileNotFoundError. We can wrap the code that might generate such an exception in a try / except block to handle such cases. Suppose we have this code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">show_contents</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Display the contents of a file&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>

<span class="n">show_contents</span><span class="p">(</span><span class="s2">&quot;here.txt&quot;</span><span class="p">)</span>        
<span class="n">show_contents</span><span class="p">(</span><span class="s2">&quot;not_here.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Because I’m a nice person and I’m not trying to trick you with the file names, you’ve probably already guessed that “not_here.txt” will cause some difficulty. Unhandled exceptions generally look ugly, and this exception (that gets generated) is no exception (to the general rule). Here’s our output (cover your eyes for a minute):</p>
<p><img alt="" src="../../_images/image-321.png" /></p>
<p>Fixing this is straightforward. We show the code we’ve added to the <code class="docutils literal notranslate"><span class="pre">show_contents</span></code> function in bold below:</p>
<p>def show_contents(filename):
“””Display the contents of a file”””
<strong>try:</strong>
with open(filename, “r”) as f:
contents = f.read()
print(contents)
<strong>except FileNotFoundError</strong>:
<strong>print(f”Error: file ‘{filename}’ was not found.”)</strong>
show_contents(“here.txt”)<br />
show_contents(“not_here.txt”)</p>
<p>We now display the error in a much more user-friendly way:</p>
<p><img alt="" src="../../_images/image-331.png" /></p>
<p>Reviewing the syntax for that fix, it was this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">statements</span> <span class="n">that</span> <span class="n">might</span> <span class="n">throw</span> <span class="n">an</span> <span class="n">exception</span>
    <span class="o">...</span>
<span class="k">except</span> <span class="n">ExceptionType</span> <span class="p">[</span><span class="k">as</span> <span class="n">variable_name</span><span class="p">]:</span>
    <span class="n">code</span> <span class="n">to</span> <span class="k">if</span> <span class="n">exception</span> <span class="n">happens</span>
</pre></div>
</div>
<p>In the example above, we didn’t capture the exception. We don’t always need it, especially when we want to display a user-friendly message so the user can fix the problem.</p>
<p>The example below shows how to capture the exception as a variable and write it to a log.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Logging an exception:  logging_example.py&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">logging</span>

<span class="k">def</span> <span class="nf">show_contents</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Catch an exception with variable name&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>    
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

<span class="n">show_contents</span><span class="p">(</span><span class="s2">&quot;not_here.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR:root:<span class="o">[</span>Errno<span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory:<span class="w"> </span><span class="s1">&#39;not_here.txt&#39;</span>
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/Users/johnlockwood/source/CodeSolid/all-private/articles/errors/logging_example.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">8</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>show_contents
<span class="w">    </span>with<span class="w"> </span>open<span class="o">(</span>filename,<span class="w"> </span><span class="s2">&quot;r&quot;</span><span class="o">)</span><span class="w"> </span>as<span class="w"> </span>f:
FileNotFoundError:<span class="w"> </span><span class="o">[</span>Errno<span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory:<span class="w"> </span><span class="s1">&#39;not_here.txt&#39;</span>
</pre></div>
</div>
<p>The effect of this is to display it to the console by default but see the <a class="reference external" href="https://docs.python.org/3/howto/logging-cookbook.html">Logging Cookbook</a> for many examples of how to configure logging in different ways.</p>
</section>
<section id="handling-base-class-exception-types">
<h2>Handling Base Class Exception Types<a class="headerlink" href="#handling-base-class-exception-types" title="Link to this heading">¶</a></h2>
<p>Some additional rules apply to Python except blocks. First, given a class hierarchy, an except block for a base class will match that type and any types derived from that base class.</p>
<p>Thus, for example, we could replace <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> in the examples that we’ve shown so far with <code class="docutils literal notranslate"><span class="pre">OSError</span></code> (or IOError, which is an alias for it) and get the same results. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ...</span>

<span class="k">try</span><span class="p">:</span>
   <span class="c1"># ...   </span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

<span class="c1"># ...</span>
</pre></div>
</div>
<p>The nice thing about this change is that we will now log <em>all</em> the errors that derive from OSError – not just FileNotFoundError. When dealing with files, a file not being there is only one thing that can go wrong. We also have to consider that the user might not have permission to read it. Let’s say we change our test to read:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">show_contents</span><span class="p">(</span><span class="s2">&quot;unreadable.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Before running our code, we could create a file we don’t have permission to read (at a terminal, assuming you’re on Mac or *nix or perhaps WSL in Windows):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a file:</span>
touch<span class="w"> </span>unreadable.txt

<span class="c1"># Make it write-only</span>
chmod<span class="w"> </span><span class="m">200</span><span class="w"> </span>unreadable.txt
</pre></div>
</div>
<p>Now when we run our code, it displays the following error message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Errno<span class="w"> </span><span class="m">13</span><span class="o">]</span><span class="w"> </span>Permission<span class="w"> </span>denied:<span class="w"> </span><span class="s1">&#39;unreadable.txt&#39;</span>
</pre></div>
</div>
</section>
<section id="handling-multiple-exception-types">
<h2>Handling Multiple Exception Types<a class="headerlink" href="#handling-multiple-exception-types" title="Link to this heading">¶</a></h2>
<p>For each try block, we can add multiple except blocks, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="c1"># Open a file, etc.</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>            
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> doesn&#39;t exist&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, we print a user-friendly message if the file is not found, but if anything else happens, we log the error.</p>
<p>Note that FileNotFoundError is derived from OSError, so it must come before OSError to make this work. This makes sense because of the point we made earlier – that a base class except block will catch any exceptions of a derived class. Because of this, the base class must come last because it is a “catch-all”.</p>
<p>Handling different related exceptions differently can be helpful for the following cases:</p>
<ul class="simple">
<li><p>You need highly customized error messages for the end user rather than a reasonable default.</p></li>
<li><p>Depending on the exception, a different team may need to look at it. There may be some Exceptions that are user errors, for example, but others that a developer on the team needs to investigate.</p></li>
</ul>
<p>For other cases, we can weigh the improved granularity of specific exceptions with the increased code complexity. More isn’t always better.</p>
</section>
<section id="handling-base-class-exceptions-a-caveat">
<h2>Handling Base Class Exceptions: A Caveat<a class="headerlink" href="#handling-base-class-exceptions-a-caveat" title="Link to this heading">¶</a></h2>
<p>If you’re trying to handle any possible exception your program can raise, you need to be aware of two things. First, if you’re using PyCharm, it will warn you that your exceptions should be more granular. I don’t always follow this advice, but one thing you definitely shouldn’t do is this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># DON&#39;T DO THIS!!!</span>

<span class="c1"># ...</span>
<span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>The reason is that <code class="docutils literal notranslate"><span class="pre">BaseException</span></code> is the parent of all exceptions in Python. This includes exceptions you should catch as well as many exceptions that you shouldn’t. Some examples of exceptions you shouldn’t catch include the user hitting the interrupt key (typically CTRL-C) to quit the program or the exception that’s raised when a generator or coroutine is closed.</p>
<p>Generally speaking, when catching a category of exceptions, you should only go as high up as you need to go. However, if you really need to ignore PyCharm’s warning and catch <em>everything</em>, then “<code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">Exception</span></code>” is your friend.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Exception</span></code> class in Python is the root of many exception classes defined in Python, and it’s also meant to be the root of any user-defined exceptions you might create.</p>
</section>
</section>
<section id="raising-built-in-and-user-defined-exceptions">
<h1>Raising Built-In and User-Defined Exceptions<a class="headerlink" href="#raising-built-in-and-user-defined-exceptions" title="Link to this heading">¶</a></h1>
<p>In addition to handling exceptions, you can also raise them, using the raise keyword and an instance of an exception class. Here’s a contrived example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">order_widget</span><span class="p">(</span><span class="n">widget</span><span class="p">):</span>

    <span class="c1"># Gadgets are dangerous</span>
    <span class="k">if</span> <span class="n">widget</span> <span class="o">==</span> <span class="s2">&quot;gadget&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Gadgets make our warehouse catch fire. Sorry.&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Placing an order for </span><span class="si">{</span><span class="n">widget</span><span class="si">}</span><span class="s2">.  Thanks!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If an order is placed for a gadget, the line ordering the widget will never be reached, because an exception will be thrown.</p>
<p>There are a couple of things to point out about this code. First, if you raise an exception in your application code like this, it needs to be in the context of an “outer” exception handler in the same function, or a function calling you, etc.</p>
<p>Secondly, for a case like this where we’re doing input validation, we can sometimes simplify it by using Python’s <code class="docutils literal notranslate"><span class="pre">assert</span></code> keyword instead of raise. If we know our user interface code doesn’t allow gadgets to be entered in our present code, we might still add a defensive <code class="docutils literal notranslate"><span class="pre">assert</span></code> in case that changes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">order_widget</span><span class="p">(</span><span class="n">widget</span><span class="p">):</span>
    <span class="c1"># Don&#39;t send widgets.  Remember what happened to Crispy Bob</span>
    <span class="k">assert</span> <span class="n">widget</span> <span class="o">!=</span> <span class="s2">&quot;gadget&quot;</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Placing an order for </span><span class="si">{</span><span class="n">widget</span><span class="si">}</span><span class="s2">.  Thanks!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>I’m going to miss Crispy Bob.</p>
<p>In application code, we often need to handle exceptions rather than raise new ones. Raising exceptions does incur some overhead. Also, the application may be able to handle the condition in another way, like wrapping the gadget in a fireproof gadget purse.</p>
<p>However, it’s often the case when developing a module or library that we’ll need to create user-defined exceptions and raise them when something goes wrong. If this is something you need to do or are considering doing, we have a separate article that discusses how to design and write <a class="reference external" href="https://codesolid.com/writing-a-python-custom-exception/" title="Writing a Python Custom Exception">Python custom exceptions</a>.</p>
</section>
<section id="python-error-handling-do-s-and-don-ts">
<h1>Python Error Handling: Do’s and Don’ts<a class="headerlink" href="#python-error-handling-do-s-and-don-ts" title="Link to this heading">¶</a></h1>
<p>Now that we’ve covered the syntax and examples of handling Python errors, it’s time to take a step back and discuss some general strategies for dealing with program errors. Some of this will recap what we’ve discussed along the way, but some of it will be new.</p>
<ul class="simple">
<li><p>DO: Use Python’s help function to understand what exceptions a function will raise. For example, the beginning of text returned by <code class="docutils literal notranslate"><span class="pre">help(open)</span></code> tells us that this function will “Raise OSError upon failure.”</p></li>
<li><p>To support this for other developers who use code you write, you should provide a docstring comment for every function that tells the user what exceptions might occur. This is especially important for library developers, but it’s a best practice in application development as well.</p></li>
<li><p>DO: Avoid long chains of complex “except” clauses unless you have a good reason for them. Catching a well-chosen base class that’s common to every class of error that might be thrown might simplify your code. But see the next point as well.</p></li>
<li><p>When handling a base class exception, only cover the necessary cases. You should never write “<code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">BaseException</span></code>” and use “<code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">Exception</span></code>” sparingly as well.</p></li>
<li><p>DO consider using <code class="docutils literal notranslate"><span class="pre">assert</span></code> for input validation for “backend” (non-user-facing) code. Don’t use it if you need to display a friendly user message.</p></li>
<li><p>DON’T rely on exceptions for simple flow control, and try to write code that makes exceptions rare. For example, if you’re creating a function that returns a list, don’t return None if there are no elements – return an empty list. Checking the length or using a loop in the caller will work as expected, not raise an exception.</p></li>
<li><p>Exceptions should really be exceptional – things that shouldn’t happen often if at all. Consider using error codes and error messages for functions that can have more than one expected error condition.</p></li>
<li><p>DO know what error codes are expected for the domain you’re programming. For example, web APIs should return well-known HTTP error codes. (See the class http.HTTPStatus in the Python runtime library, for example).</p></li>
<li><p>DO add logging to any kind of server or backend code with no direct user interface. This includes model and controller code in Flask, Django, etc., as well as AWS Lambda functions and other service code.</p></li>
<li><p>Unless doing so would expose Personal Identifiable Information (PII), which should not be included in the logs, logging should include call stack information to simplify troubleshooting. As we’ve seen, <code class="docutils literal notranslate"><span class="pre">logging.exception</span></code> can be used to do this.</p></li>
<li><p>Use a function in the logging module appropriate to the information you’re providing. If it’s not an error, use debug or info.</p></li>
<li><p>Server output should be sparse (not displaying debug or info level detail) by default, but to do that effectively, you should have a way to change the logging level of the server dynamically without re-releasing the software.</p></li>
<li><p>DO spend enough time getting logging right. Remember, it’s not a question of whether something will happen in production. Something <strong><em>will</em></strong> happen in production, so the choice is to add logging during the day when you’re fresh or do it under pressure at night while listening to big shots complain on an all-hands call. Make it easy on yourself and do it during the day.</p></li>
<li><p>DO make sure your test cases cover exception cases in addition to the “happy path.”</p></li>
<li><p>DO keep logging and error handling simple. Sometimes software developers can get carried away writing sophisticated frameworks for things. In general, however, Python has all the tools you need for logging and error handling as part of the runtime library.</p></li>
</ul>
<p>OK, that’s a long list, but an important one. There have been many software magic bullets over the years that were going to help us create better software, but effective error handling is one that has withstood the test of time. Using Python’s error-handling tools is hardly glamorous work, but the result is professional-quality software.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, John Lockwood.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QX7KGT4YPE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QX7KGT4YPE', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>