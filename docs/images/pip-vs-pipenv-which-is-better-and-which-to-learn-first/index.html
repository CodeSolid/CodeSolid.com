<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started with Pip and Virtual Environments &mdash; CodeSolid.com 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=19645805"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../" class="icon icon-home">
            CodeSolid.com
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Featured Articles:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../using-latex-in-python/">Using LaTeX In Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installing-pyenv-on-a-mac/">Installing Pyenv on a Mac (A Setup Guide With Usage Tips)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conda-vs-pip/">Conda vs. Pip, Venv, and Pyenv – Simplicity Wins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jupyter-password/">Jupyter Password: Easy Notebook and Lab Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Categories</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../category-c-and-cplusplus/">C and C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-docker/">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-jupyter/">Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-learn-to-code/">Learn to Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-math-and-math-software/">Math and Math Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-math/">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-miscellaneous/">Other</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-newsletter/">Newsletter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-pandas/">Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-python-for-beginners-posts/">Python for Beginners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-python-functions/">Python Funcitons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-python-math-and-science/">Python Math and Science</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-python-practice/">Header</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-python-tools/">Python Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../category-python/">Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../all_files/">Site Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">CodeSolid.com</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started with Pip and Virtual Environments</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/images/pip-vs-pipenv-which-is-better-and-which-to-learn-first/index.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>Pipenv and pip are both excellent tools for installing and managing Python dependencies that are widely adopted and work extremely well.</p>
<p>Learning pip well first is the choice we recommend. Pip is established and widely known, so many teams prefer pip and venv to manage dependencies and virtual environments. Pipenv makes a few things simpler, but for every thing it simplifies, it makes other things more complex than they need to be.</p>
<p>We’ll show you why creating virtual environments and using pip to install packages is not difficult. This will highlight some strengths of pip as compared to pipenv. Then, we’ll go on to discuss the problems with pip that pipenv tries to solve, but fair warning – the more we dug into pipenv, the more we longed for the simplicity of pip!</p>
<p>Table of Contents</p>
<ul class="simple">
<li><p>Getting Started with Pip and Virtual Environments</p></li>
<li><p>Your First Virtual Environment in Under Five Minutes</p></li>
<li><p>Using Pip to Install Packages Into a Virtual Environment</p></li>
<li><p>Testing the Pip Install Results</p></li>
<li><p>How to Use “requirements.txt”</p></li>
<li><p>Creating requirements.txt and Using Pinned Requirements</p></li>
<li><p>Should You Create requirements.txt Using Pip Freeze?</p></li>
<li><p>Problems that Pipenv Tries to Solve</p></li>
<li><p>Pip-tools vs Pipenv</p></li>
<li><p>Final Thoughts</p></li>
</ul>
<section id="getting-started-with-pip-and-virtual-environments">
<h1>Getting Started with Pip and Virtual Environments<a class="headerlink" href="#getting-started-with-pip-and-virtual-environments" title="Link to this heading"></a></h1>
<p>Compared to pipenv, pip is more tightly integrated with Python. Many Python distributions now include pip by default, so you don’t need to do anything extra to get it. You can run the <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">--version</span></code> to see if it’s on your path and which version of Python it’s using. (Note that for python3, in some distributions it may be called “pip3”).</p>
<p>If you don’t have pip or notice a problem, <a class="reference external" href="https://pip.pypa.io/en/stable/installation">installing it is straightforward</a>.</p>
<p>The command, <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code>, will install a pip package globally so that all your Python projects will have it available, but since this can cause many version conflicts if you work on different projects and is difficult to reason about when you work on a team, it is strongly discouraged. Instead, pip is usually used to install packages into a virtual environment. The python “venv” module can be used to create the virtual environment.</p>
</section>
<section id="your-first-virtual-environment-in-under-five-minutes">
<h1>Your First Virtual Environment in Under Five Minutes<a class="headerlink" href="#your-first-virtual-environment-in-under-five-minutes" title="Link to this heading"></a></h1>
<p>Here are two commands I’ve used many, many times – I generally run this at the start of every Python project I work on. This will go quickly, I promise, but you should write these lines down somewhere!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a virtual environment in the .venv directory:</span>
%<span class="w"> </span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv

<span class="c1"># Make the virtual environment active (Linux / Mac)</span>
%<span class="w"> </span><span class="nb">source</span><span class="w"> </span>.venv/bin/activate

<span class="c1"># OR</span>

<span class="c1"># Make the virtual environment active (Windows)</span>
.venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate.bat
</pre></div>
</div>
<p>At this point, you’re all set to start working with your new virtual environment, and you can safely use pip to install packages into it. There’s one last housekeeping item we should take care of first, though. If you’re working in a git repository, it’s recommended to add these lines to your .gitignore file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ignore common virtual environment names anywhere in project</span>
**/venv
**/.venv
</pre></div>
</div>
</section>
<section id="using-pip-to-install-packages-into-a-virtual-environment">
<h1>Using Pip to Install Packages Into a Virtual Environment<a class="headerlink" href="#using-pip-to-install-packages-into-a-virtual-environment" title="Link to this heading"></a></h1>
<p>With our virtual environment installed and activated, we can now start installing packages into it that we can use. Let’s say we want to install pandas. There are several ways to go about this. Let’s start with the simplest:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pandas

...
Successfully<span class="w"> </span>installed<span class="w"> </span>numpy-1.22.0<span class="w"> </span>pandas-1.3.5<span class="w"> </span>python-dateutil-2.8.2<span class="w"> </span>pytz-2021.3<span class="w"> </span>six-1.16.0
</pre></div>
</div>
<p>This will take a minute or two to install. Before we go further into this, let’s take a moment to celebrate our first victory.</p>
</section>
<section id="testing-the-pip-install-results">
<h1>Testing the Pip Install Results<a class="headerlink" href="#testing-the-pip-install-results" title="Link to this heading"></a></h1>
<p>Did this work? Let’s see….</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">python</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>As you saw, the last line showed the dependencies that were installed. (Note that your versions will be different, depending on when you try this). For the current virtual environment, you can always list all the installed packages and their dependencies using pip freeze”.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>pip<span class="w"> </span>freeze
<span class="nv">numpy</span><span class="o">==</span><span class="m">1</span>.22.0
<span class="nv">pandas</span><span class="o">==</span><span class="m">1</span>.3.5
python-dateutil<span class="o">==</span><span class="m">2</span>.8.2
<span class="nv">pytz</span><span class="o">==</span><span class="m">2021</span>.3
<span class="nv">six</span><span class="o">==</span><span class="m">1</span>.16.0
</pre></div>
</div>
</section>
<section id="how-to-use-requirements-txt">
<h1>How to Use “requirements.txt”<a class="headerlink" href="#how-to-use-requirements-txt" title="Link to this heading"></a></h1>
<p>When we installed pandas, we just used <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pandas</span></code> and that was enough to get the latest version, which turned out (at the time of this writing) to be 1.3.5. For learning purposes, just working with the latest official release of a package is probably sufficient.</p>
<p>However, on a team working on a production product, or even as a lone developer with a project that has a significant amount of code, you need a way to create and document a reproducible build. Many teams use a file – usually called requirements.txt – for this purpose. A requirements.txt file contains packages to be installed, one per line. You install it using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
</section>
<section id="creating-requirements-txt-and-using-pinned-requirements">
<h1>Creating requirements.txt and Using Pinned Requirements<a class="headerlink" href="#creating-requirements-txt-and-using-pinned-requirements" title="Link to this heading"></a></h1>
<p>There are at least two ways to create a requirements.txt file. The easiest is to simply redirect the output of pip freeze:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">freeze</span> <span class="o">&gt;</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>A benefit of this approach is that it shows all the requirements for the projects, and all of them are pinned. A pinned requirement is like the line we saw we ran pip freeze earlier: “pandas==1.3.5”. The double equals sign between the package name and version number tells pip, “give me exactly this version”. Though it’s less common, you can also use a pinned requirement on the command line, i.e., “<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pandas==1.3.5</span></code>”. This is useful, for example, to reproduce a bug that you know to be in a specific version. As we saw, though, the more common use at the command line is simply “pip install SomeProject”.</p>
<p>Pip also supports many other operators and combinations that are used far less frequently than pinned versions, such as <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&quot;SomeProject&gt;=1.2,&lt;2&quot;</span></code>. Here you want some version greater than or equal to 1.2, but less than 2.</p>
</section>
<section id="should-you-create-requirements-txt-using-pip-freeze">
<h1>Should You Create requirements.txt Using Pip Freeze?<a class="headerlink" href="#should-you-create-requirements-txt-using-pip-freeze" title="Link to this heading"></a></h1>
<p>Redirecting pip freeze is a time-honored approach and one you’ll see often documented, but it does have a problem. Let’s say three months from now, the team no longer needs pandas, and you’re asked to remove it from the build. So you go in and remove the line <code class="docutils literal notranslate"><span class="pre">pandas==1.3.5</span></code>. That makes sense, right? Well, I agree it does make sense, but the issue is that it still leaves in all the dependencies that pandas relied on that also got installed.</p>
<p>For this reason, many teams will instead just create their requirements.txt file manually, by adding one pinned, top-level package at a time. For our example, requirements.txt would look like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">pandas</span><span class="o">==</span><span class="m">1</span>.3.5
</pre></div>
</div>
<p>This approach ensures that for production builds at least, if pandas is removed, neither it nor its dependencies will be installed. (Some developers will use another package, pip-autoremove, to uninstall sub-dependencies locally, but another tactic is to simply rebuild the local virtual environment from time to time from requirements.txt).</p>
</section>
<section id="problems-that-pipenv-tries-to-solve">
<h1>Problems that Pipenv Tries to Solve<a class="headerlink" href="#problems-that-pipenv-tries-to-solve" title="Link to this heading"></a></h1>
<p>Pipenv tries to solve some problems with using requirements.txt and Python virtual environments in the traditional way that we’ve described above.</p>
<p>We’ve already seen two of these problems. First, ipenv’s documentation claims that “You no longer need to use <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> separately. They work together.”</p>
<p>Well, that’s true as far as it goes, and I have to admit I thought it was a feature until I committed “<code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">venv</span> <span class="pre">.venv</span></code>” and “<code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">.venv/bin/activate</span></code>” to finger memory. But rather than put your virtual directory in .venv or some other reasonable place that is <em>exactly where you told it to put it</em> (you know, like a useful tool), it puts them into a hashed directory under your user home directory. To prevent that behavior, you need to set an environment variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PIPENV_VENV_IN_PROJECT</span><span class="o">=</span><span class="s2">&quot;enabled&quot;</span>
</pre></div>
</div>
<p>I understand that some tools are opinionated, but to my way of thinking, not having a command-line switch, <code class="docutils literal notranslate"><span class="pre">--local</span></code> or the like, is not just opinionated – it’s “my way or the highway”.</p>
<p>Another problem we’ve glimpsed in our discussion of pip that pipenv solves is that of separating the user’s initial intent to just install the latest package from a pinned version of what was already built. Pipenv does this by separating having two separate files, a “Pipfile” that contains general project information including a “packages” section for our intended dependencies, together with a Pipfile.lock file which contains the actual versions installed and their dependencies. It also includes a handy command, <code class="docutils literal notranslate"><span class="pre">pipenv</span> <span class="pre">graph</span></code>, to show top-level dependencies and what they depend on. If we just install pandas as we have been doing, here’s how it looks:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>pipenv<span class="w"> </span>graph<span class="w">  </span>
<span class="nv">pandas</span><span class="o">==</span><span class="m">1</span>.3.5
<span class="w">  </span>-<span class="w"> </span>numpy<span class="w"> </span><span class="o">[</span>required:<span class="w"> </span>&gt;<span class="o">=</span><span class="m">1</span>.21.0,<span class="w"> </span>installed:<span class="w"> </span><span class="m">1</span>.22.0<span class="o">]</span>
<span class="w">  </span>-<span class="w"> </span>python-dateutil<span class="w"> </span><span class="o">[</span>required:<span class="w"> </span>&gt;<span class="o">=</span><span class="m">2</span>.7.3,<span class="w"> </span>installed:<span class="w"> </span><span class="m">2</span>.8.2<span class="o">]</span>
<span class="w">    </span>-<span class="w"> </span>six<span class="w"> </span><span class="o">[</span>required:<span class="w"> </span>&gt;<span class="o">=</span><span class="m">1</span>.5,<span class="w"> </span>installed:<span class="w"> </span><span class="m">1</span>.16.0<span class="o">]</span>
<span class="w">  </span>-<span class="w"> </span>pytz<span class="w"> </span><span class="o">[</span>required:<span class="w"> </span>&gt;<span class="o">=</span><span class="m">2017</span>.3,<span class="w"> </span>installed:<span class="w"> </span><span class="m">2021</span>.3<span class="o">]</span>
</pre></div>
</div>
<p>You can also see the dependency graph using pip itself, but it requires installing a separate package, <a class="reference external" href="https://pypi.org/project/pipdeptree/">pipdeptree</a>. So in due fairness to pipenv, having this capability integrated into the tool is a nice touch.</p>
</section>
<section id="pip-tools-vs-pipenv">
<h1>Pip-tools vs Pipenv<a class="headerlink" href="#pip-tools-vs-pipenv" title="Link to this heading"></a></h1>
<p>Since pipenv and pip-tools have some overlap in terms of functionality, we should compare them briefly. Both pip-tools and pipenv are used to manage packages and dependencies, but they take different approaches. pip-tools is a more traditional approach that uses a requirements.txt file to track dependencies. (It can create the requirements.txt complete with pinned requirements from a requirements.in file). The requirements.txt file is then used to install packages via the pip command-line tool.</p>
<p>By contrast, pipenv takes a “live” approach to dependency management. It automatically generates a Pipfile, which tracks both production and development dependencies. This file can then be used to install all required packages with a single command. In addition, as we’ve seen, pipenv can also be used to create virtual environments, which is helpful for isolating different projects. Ultimately, the choice between pip-tools and pipenv depends on personal preferences and project requirements.</p>
</section>
<section id="final-thoughts">
<h1>Final Thoughts<a class="headerlink" href="#final-thoughts" title="Link to this heading"></a></h1>
<p>Pipenv does contain some interesting convenience functions that pip lacks, and the attempt to build them into a single tool was a worthwhile effort. On balance, however, and especially for Python beginners, the tool of choice that we recommend for Python package management is pip.</p>
<p>As we’ve seen, most of the effort that one needs to get started creating and activating a virtual environment just using basic Python boils down to learning a couple of simple command-line instructions. From that point, using pip to install packages into those environments is not complex at all.</p>
<p>To be sure, pipenv does have some convenience functions that are not built in to pip, but these come at a cost of a tool that is overly complex and opinionated. With pip, you have everything you need to get started out of the box, and you pay for complexity with third-party tools when you need it. With pipenv, you have to fight the tool at the beginning, and that’s not what we want. After all, a package manager is meant to get out of the way and let us get on with the business of coding in Python.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, John Lockwood.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QX7KGT4YPE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QX7KGT4YPE', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>